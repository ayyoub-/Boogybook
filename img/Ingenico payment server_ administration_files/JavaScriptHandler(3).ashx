(function(n){function t(n,t){return t-(n.value.slice(0,t).split("\r\n").length-1)}n.fn.numeric=function(t,i){typeof t=="boolean"&&(t={decimal:t});t=t||{};typeof t.negative=="undefined"&&(t.negative=!0);var r=t.decimal===!1?"":t.decimal===!0?".":t.decimal||".",u=t.negative===!0?!0:!1;return i=typeof i=="function"?i:function(){},this.data("numeric.decimal",r).data("numeric.negative",u).data("numeric.callback",i).keypress(n.fn.numeric.keypress).keyup(n.fn.numeric.keyup).blur(n.fn.numeric.blur)};n.fn.numeric.keypress=function(t){var e=!!navigator.userAgent.match(/Trident.*rv\:11\./)||BrowserDetect.browser=="Chrome"||BrowserDetect.browser=="Explorer"&&BrowserDetect.version<=10,u=n.data(this,"numeric.decimal"),o=n.data(this,"numeric.negative"),i=t.charCode?t.charCode:t.keyCode?t.keyCode:0,r,f;if(i==13&&this.nodeName.toLowerCase()=="input")return!0;if(i==13)return!1;if((r=!1,t.ctrlKey&&i==97||t.ctrlKey&&i==65)||t.ctrlKey&&i==120||t.ctrlKey&&i==88||t.ctrlKey&&i==99||t.ctrlKey&&i==67||t.ctrlKey&&i==122||t.ctrlKey&&i==90||t.ctrlKey&&i==118||t.ctrlKey&&i==86||t.shiftKey&&i==45)return!0;if(i<48||i>57){if(f=n(this).val(),f.indexOf("-")!==0&&o&&i==45&&(f.length===0||parseInt(n.fn.getSelectionStart(this),10)===0))return!0;u&&i==u.charCodeAt(0)&&f.indexOf(u)!=-1&&(r=!1);i!=8&&i!=9&&i!=13&&i!=35&&i!=36&&i!=37&&i!=39&&i!=46||e?r=!1:typeof t.charCode!="undefined"&&(t.keyCode==t.which&&t.which!==0?(r=!0,t.which==46&&(r=!1)):t.keyCode!==0&&t.charCode===0&&t.which===0&&(r=!0));typeof t.charCode!="undefined"?t.charCode==46&&(t.keyCode==0||t.keyCode==t.charCode)&&u&&i==u.charCodeAt(0)&&(r=f.indexOf(u)==-1?!0:!1):t.keyCode==46&&u&&i==u.charCodeAt(0)&&(r=f.indexOf(u)==-1?!0:!1)}else r=!0;return r};n.fn.numeric.keyup=function(){var t=n(this).val(),c,l,a,i,f,v,e,y,u,p,o;if(t&&t.length>0){var s=n.fn.getSelectionStart(this),h=n.fn.getSelectionEnd(this),r=n.data(this,"numeric.decimal"),w=n.data(this,"numeric.negative");for(r!==""&&r!==null&&(c=t.indexOf(r),c===0&&(this.value="0"+t,h=h+1,s=s+1),c==1&&t.charAt(0)=="-"&&(this.value="-0"+t.substring(1)),t=this.value),l=[0,1,2,3,4,5,6,7,8,9,"-",r],a=t.length,i=a-1;i>=0;i--){for(f=t.charAt(i),i!==0&&f=="-"?t=t.substring(0,i)+t.substring(i+1):i!==0||w||f!="-"||(t=t.substring(1)),v=!1,e=0;e<l.length;e++)if(f==l[e]){v=!0;break}v&&f!=" "||(t=t.substring(0,i)+t.substring(i+1))}if(y=t.indexOf(r),y>0)for(u=a-1;u>y;u--)p=t.charAt(u),p==r&&(t=t.substring(0,u)+t.substring(u+1));this.value=t;n.fn.setSelection(this,[s,h])}else n(this).hasClass("inp-txt-error")&&(n(this).removeClass("inp-txt-error"),o=n(this).parent(),n(o).hasClass("input-bg-alert")&&(n(o).removeClass("input-bg-alert"),n(o).addClass("input-bg")))};n.fn.numeric.blur=function(){var f=n.data(this,"numeric.decimal"),e=n.data(this,"numeric.negative"),i,r,t,u;i=e?"-":"+";r=n.data(this,"numeric.callback");t=this.value;t!==""&&(u=new RegExp("^["+i+"]?(\\d+\\.?|\\d*\\"+f+"\\d+)$"),u.exec(t)||r.apply(this),n(this).change())};n.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",n.fn.numeric.keypress).unbind("blur",n.fn.numeric.blur)};n.fn.getSelectionStart=function(n){if(n.createTextRange){if(document.selection!=null){var t=document.selection.createRange().duplicate();return(t.moveEnd("character",n.value.length),t.text==="")?n.value.length:n.value.lastIndexOf(t.text)}return n.selectionStart}return n.selectionStart};n.fn.getSelectionEnd=function(n){if(n.createTextRange){if(document.selection!=null){var t=document.selection.createRange().duplicate();return t.moveStart("character",-n.value.length),t.text.length}return n.selectionEnd}return n.selectionEnd};n.fn.setSelection=function(n,i){if(typeof i=="number"&&(i=[i,i]),i&&i.constructor==Array&&i.length==2)if(n.setSelectionRange)n.focus(),n.setSelectionRange(i[0],i[1]);else if(n.createTextRange){var r=n.createTextRange(),u=t(n,i[0]);r.collapse(!0);i[0]==i[1]?r.move("character",u):(r.moveEnd("character",t(n,i[1])),r.moveStart("character",i[0]));r.select()}}})(jQuery);